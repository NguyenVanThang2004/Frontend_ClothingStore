<div class="card shadow p-3">
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4>Quản lý sản phẩm</h4>
        <button class="btn btn-success" (click)="addProductModal.openModal()">
            <i class="fa fa-plus"></i> Thêm sản phẩm
        </button>
    </div>

    <!-- Modal thêm s -->
    <app-base-modal #addProductModal [modalTitle]="editingIndex !== null ? 'Sửa sản phẩm' : 'Thêm sản phẩm'"
        [contentButton]="editingIndex !== null ? 'Lưu' : 'Thêm'" (submit)="handleAddProduct()">

        <form class="p-2">
            <div class="mb-3">
                <label class="form-label">Tên sản phẩm</label>
                <input type="text" class="form-control" [(ngModel)]="newProduct.name" name="name">
            </div>

            <div class="mb-3">
                <label class="form-label">Giá</label>
                <input type="number" class="form-control" [(ngModel)]="newProduct.price" name="price">
            </div>

            <div class="mb-3">
                <label class="form-label">Số lượng</label>
                <input type="number" class="form-control" [(ngModel)]="newProduct.quantity" name="quantity">
            </div>

            <div class="mb-3">
                <label class="form-label">Danh mục</label>
                <select class="form-select" [(ngModel)]="newProduct.category" name="category">
                    <option value="" disabled>Chọn danh mục</option>
                    <option *ngFor="let c of categories" [value]="c">{{ c }}</option>
                </select>
            </div>

            <div class="mb-3">
                <label class="form-label">Mô tả</label>
                <textarea class="form-control" [(ngModel)]="newProduct.description" name="description"></textarea>
            </div>

            <div class="mb-3">
                <label class="form-label">Mô tả</label>
                <textarea class="form-control" [(ngModel)]="newProduct.description" name="description"></textarea>
            </div>


            <div class="mb-3">
                <label class="form-label">Mô tả</label>
                <textarea class="form-control" [(ngModel)]="newProduct.description" name="description"></textarea>
            </div>

            <div class="mb-3">
                <label class="form-label">Ảnh sản phẩm (URL)</label>
                <input type="text" class="form-control" [(ngModel)]="newProduct.image" name="image">
            </div>
        </form>
    </app-base-modal>




    <!-- Table sản phẩm -->
    <table class="table table-bordered table-hover">
        <thead class="thead-dark">
            <tr>
                <th>Mã</th>
                <th>Tên sản phẩm</th>
                <th>Giá</th>
                <th>Tồn kho</th>
                <th>Danh mục</th>
                <th>Hình ảnh</th>
                <th>Hành động</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let p of products; let i = index">
                <td>{{ 'SP' + (i + 1 | number:'3.0') }}</td>
                <td>{{ p.name }}</td>
                <td>{{ p.price | number }}đ</td>
                <td>{{ p.quantity }}</td>
                <td>{{ p.category }}</td>
                <td>
                    <i class="fa fa-image"></i> {{ p.image ? '1 ảnh' : '0 ảnh' }}
                </td>
                <td>
                    <button class="btn btn-warning btn-sm" (click)="editProduct(i)">
                        <i class="fa fa-edit"></i>
                    </button>
                    <button class="btn btn-danger btn-sm" (click)="deleteProduct(i)">
                        <i class="fa fa-trash"></i>
                    </button>
                </td>
            </tr>
        </tbody>

    </table>
</div>